<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Bible Belt â€” Clean Starter</title>

    <!-- Early theme (prevents flash) -->
    <script>
        (function () {
            const stored = localStorage.getItem("theme");
            const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
            const theme = stored || (prefersDark ? "dark" : "light");
            document.documentElement.classList.toggle("dark", theme === "dark");
            document.documentElement.classList.toggle("light", theme !== "dark");
        })();
    </script>

    <link rel="stylesheet" href="styles.css" />

    <!-- Leaflet (for Church map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
</head>

<body>
    <header class="site-header">
        <div class="brand">
            <img src="assets/mybiblebelt-icon.png" alt="MyBibleBelt Logo" class="brand__img">
            <span>My Bible Belt</span>
        </div>

        <!-- Centered nav -->
        <nav class="nav">
            <button class="nav-btn" data-tab="welcome">Welcome</button>
            <button class="nav-btn" data-tab="church">Church</button>
            <button class="nav-btn" data-tab="resources">Resources</button>
            <button class="nav-btn" data-tab="prayer">Prayer</button>
            <button class="nav-btn" data-tab="study">Study</button>
            <button class="nav-btn" data-tab="recovery">Recovery</button>
            <button class="nav-btn" data-tab="community">Community</button>
            <button class="nav-btn" data-tab="support">Support</button>
            <button id="themeToggle" class="icon-btn" title="Toggle theme">ðŸŒ“</button>
        </nav>

        <!-- Mobile nav (Recovery option removed per your request) -->
        <div class="mobile-nav">
            <label for="mobileNav" class="sr-only">Navigate</label>
            <select id="mobileNav">
                <option value="welcome">Welcome</option>
                <option value="church">Church</option>
                <option value="resources">Resources</option>
                <option value="prayer">Prayer</option>
                <option value="study">Study</option>
                <option value="community">Community</option>
                <option value="support">Support</option>
            </select>
            <button id="themeToggleMobile" class="icon-btn" title="Toggle theme (mobile)">ðŸŒ“</button>
        </div>
    </header>

    <main>
        <!-- WELCOME -->
        <section id="welcome" class="tab">
            <div class="card">
                <h2>Welcome</h2>
                <p class="muted">Pick a tab above to explore the app.</p>
            </div>
        </section>

        <!-- CHURCH -->
        <section id="church" class="tab hidden">
            <h1 class="page-title">Church Finder</h1>
            <p class="page-sub">Find nearby churches by location or city.</p>

            <div class="card">
                <div class="row gap">
                    <label class="pg-field grow">
                        <span class="pg-label">Search by city/town</span>
                        <input id="churchSearch" class="pg-input" placeholder="e.g., Knoxville, TN" />
                    </label>

                    <label class="pg-field w-160">
                        <span class="pg-label">Radius (miles)</span>
                        <select id="churchRadius" class="pg-input">
                            <option>3</option>
                            <option selected>5</option>
                            <option>10</option>
                            <option>15</option>
                        </select>
                    </label>
                </div>

                <div class="row gap mt">
                    <button id="churchUseMyLocation" class="btn primary">Use My Location</button>
                    <button id="churchSearchBtn" class="btn">Search City</button>
                    <button id="churchClearBtn" class="btn">Clear</button>
                </div>

                <div id="churchStatus" class="muted mt-8"></div>
            </div>

            <div class="grid-2 mt-16">
                <div class="card">
                    <div class="section-title">Map</div>
                    <div id="churchMap" class="map"></div>
                </div>

                <div class="card">
                    <div class="section-title">Nearby Churches</div>
                    <div id="churchResults" class="list mt"></div>
                </div>
            </div>
        </section>

        <!-- RESOURCES -->
        <section id="resources" class="tab hidden">
            <div class="card">
                <h2>Resources</h2>
                <p class="muted">Add or browse study resources (persisted locally).</p>
                <div id="kitsGrid" class="grid mt"></div>
            </div>
        </section>

        <!-- PRAYER -->
        <section id="prayer" class="tab hidden">
            <div class="card">
                <h2>Prayer</h2>
                <p class="muted">Simple tools for prayer and requests.</p>
            </div>
        </section>

        <!-- STUDY -->
        <section id="study" class="tab hidden">
            <div class="card">
                <h2>Study</h2>
                <p class="muted">Create quick study cards and export.</p>
            </div>
        </section>

        <!-- COMMUNITY -->
        <section id="community" class="tab hidden">
            <div class="card">
                <h2>Community</h2>
                <p class="muted">Local chat, notes, and projects.</p>
            </div>
        </section>

        <!-- RECOVERY (id is recovery-plan; router maps #recovery to this) -->
        <section id="recovery-plan" class="tab hidden" data-print="recovery">
            <div class="card">
                <h2>Recovery Power in Christ</h2>
                <p class="muted">10-step plan with space for your reflections.</p>

                <div class="row gap mt">
                    <button id="printPlanBtn" class="btn">Print this Plan</button>
                    <div class="grow"></div>
                </div>

                <details class="re-step" open>
                    <summary><span class="step-num">1</span> Surrender & Honesty</summary>
                    <div class="re-body">
                        <p>Admit powerlessness; invite Christ with total honesty.</p>
                        <label class="mt">
                            My note
                            <textarea class="pg-textarea" rows="3" placeholder="Personal reflectionâ€¦"></textarea>
                        </label>
                    </div>
                </details>

                <!-- keep the rest minimal for demo -->
            </div>
        </section>

        <!-- SUPPORT -->
        <section id="support" class="tab hidden">
            <div class="card">
                <h2>Support</h2>
                <p>If this project helps you, you can support it below.</p>
            </div>
        </section>
    </main>

    <footer class="site-footer">Â© <span id="year"></span> My Bible Belt</footer>

    <script src="app.js"></script>
</body>
</html>
