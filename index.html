<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>mybiblebelt.org</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Set theme BEFORE CSS to prevent flash -->
    <script>
        (function () {
            try {
                const stored = localStorage.getItem("theme");
                const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
                const useDark = stored ? stored === "dark" : prefersDark;
                if (useDark) document.documentElement.classList.add("dark");
            } catch { }
        })();
    </script>

    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <header class="site-header">
        <div class="brand">
            <div class="logo">
                <img src="assets/mybiblebelt-icon.png" alt="mybiblebelt.org Logo" style="width:36px; height:36px; border-radius:10px;">
            </div>
            <div class="brand-text">
                <div class="brand-title">mybiblebelt.org</div>
                <div class="brand-sub">Bible-focused study • Find community • Grow daily</div>
            </div>
        </div>

        <nav class="nav">
            <button data-tab="welcome" class="nav-btn active">Welcome</button>
            <button data-tab="resources" class="nav-btn">Resources</button>
            <button data-tab="community" class="nav-btn">Community</button>
            <button data-tab="growth" class="nav-btn">Personal Growth</button>
            <button data-tab="study" class="nav-btn">Bible Study</button>
            <button data-tab="recovery" class="nav-btn">Recovery</button>
            <button data-tab="payit" class="nav-btn">Pay it Forward</button>
            <button id="themeToggle" class="nav-btn" aria-label="Toggle dark mode">🌙</button>
        </nav>

        <div class="nav-select-wrap">
            <div class="row gap">
                <select id="mobileNav">
                    <option value="welcome">Welcome</option>
                    <option value="resources">Resources</option>
                    <option value="community">Community</option>
                    <option value="growth">Personal Growth</option>
                    <option value="study">Bible Study</option>
                    <option value="recovery">Recovery</option>
                    <option value="payit">Pay it Forward</option>
                </select>
                <button id="themeToggleMobile" class="btn" aria-label="Toggle dark mode">🌙</button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Welcome -->
        <section id="welcome" class="tab-section">
            <h1 class="page-title">Welcome to mybiblebelt.org</h1>
            <p class="page-sub">Bible-focused study with a warm invitation to worship in a local church of your preference.</p>

            <div class="card">
                <p>
                    Our heart is to help you explore Scripture, find community, and grow daily. Whether you are just
                    beginning or continuing a lifelong journey, you are welcome here. We encourage you to visit a local
                    church—of your preference—to worship, learn, and serve alongside others.
                </p>
                <div class="actions">
                    <button id="findChurchBtn" class="btn primary">Find a Local Church</button>
                </div>
            </div>

            <div class="grid-3">
                <div class="card">
                    <h2 class="section-title">Start Studying</h2>
                    <p>Open a study path that fits your background and goals.</p>
                    <a data-jump="resources" href="#" class="link">Browse Starter Kits →</a>
                </div>
                <div class="card">
                    <h2 class="section-title">Find Community</h2>
                    <p>Discover local info and start chats with trusted contacts.</p>
                    <a data-jump="community" href="#" class="link">Open Community →</a>
                </div>
                <div class="card">
                    <h2 class="section-title">Grow Daily</h2>
                    <p>Devotionals, goals, journaling, and ministry ideas.</p>
                    <a data-jump="growth" href="#" class="link">Go to Personal Growth →</a>
                </div>
            </div>
        </section>


        <!-- Resources -->
        <section id="resources" class="tab-section hidden">
            <h1 class="page-title">Resources</h1>
            <p class="page-sub">Browse a Starter Kit for many religions and denominations. Expand any study to go deeper.</p>

            <div class="card">
                <h2 class="section-title">Add Your Own Starter Kit</h2>
                <div class="row gap">
                    <input id="kitTitle" class="input" placeholder="Title (e.g., Lutheran — Starter Kit)" />
                    <input id="kitIntro" class="input" placeholder="One-line intro" />
                </div>
                <textarea id="kitStudy" rows="3" class="input" placeholder="Optional: First study content"></textarea>
                <div class="actions">
                    <button id="addKitBtn" class="btn primary">Add Kit</button>
                    <button id="clearKitFormBtn" class="btn">Clear</button>
                </div>
            </div>

            <div id="kitsGrid" class="grid-2"></div>
        </section>

        <!-- Community -->
        <section id="community" class="tab-section hidden">
            <h1 class="page-title">Community</h1>
            <p class="page-sub">Local information and lightweight chats with your contacts.</p>

            <div class="card">
                <h2 class="section-title">Local Community</h2>
                <p>Enter your city/region to personalize local info cards.</p>
                <div class="row gap">
                    <input id="localCity" class="input" placeholder="City" />
                    <input id="localRegion" class="input" placeholder="State/Region" />
                    <button id="localRefresh" class="btn">Refresh</button>
                </div>

                <div class="grid-3 mt">
                    <div class="info-tile">
                        <div class="info-title">Upcoming Events</div>
                        <div class="info-body">Town Hall, Food Pantry, Youth Night…</div>
                    </div>
                    <div class="info-tile">
                        <div class="info-title" id="churchesNear">Churches Near …</div>
                        <div class="info-body">Baptist, Methodist, Catholic, SDA, Non-Denom…</div>
                    </div>
                    <div class="info-tile">
                        <div class="info-title">Community Services</div>
                        <div class="info-body">Clothing closet, counseling, shelters, tutoring.</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h2 class="section-title">Contacts</h2>
                    <div class="row gap">
                        <input id="contactName" class="input" placeholder="Add contact name" />
                        <button id="addContactBtn" class="btn primary">Add</button>
                    </div>
                    <div id="contactsList" class="list mt"></div>
                </div>

                <div class="card">
                    <h2 class="section-title">Chats</h2>
                    <div class="chat">
                        <div class="chat-sidebar" id="chatSidebar"></div>
                        <div class="chat-main">
                            <div class="chat-header">
                                <div id="activeChatName" class="chat-title">Select a chat</div>
                                <button id="clearChatBtn" class="btn">Clear</button>
                            </div>
                            <div id="chatMessages" class="chat-messages"></div>
                            <div class="row gap mt">
                                <input id="chatInput" class="input" placeholder="Type a message" />
                                <button id="sendChatBtn" class="btn primary">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Personal Growth -->
        <section id="growth" class="tab-section hidden">
            <h1 class="page-title">Personal Growth</h1>
            <p class="page-sub">Devotional, goals, journal, and practical ministry.</p>

            <!-- ===== Prayer Section (Drop-in) ===== -->
            <section id="prayer-section" class="pg-card pg-span-2">
                <header class="pg-header">
                    <h2 class="pg-title">Prayer</h2>
                    <p class="pg-subtitle">Pray • Learn • Share</p>
                </header>

                <!-- Action Bar -->
                <div class="pg-actions">
                    <button class="pg-btn" id="btnCreateRule">Create Prayer Rule</button>
                    <button class="pg-btn" id="btnPrayerRequest">Prayer Request</button>
                    <button class="pg-btn primary" id="btnPrayNow">Pray Now</button>
                </div>

                <!-- Create Prayer Rule (Builder) -->
                <div class="pg-panel" id="ruleBuilder" hidden>
                    <h3 class="pg-panel-title">Create a Simple Prayer Rule</h3>
                    <form id="ruleForm" class="pg-form">
                        <div class="pg-row">
                            <div class="pg-field">
                                <label class="pg-label">Times of Day</label>
                                <label class="pg-chip"><input type="checkbox" name="times" value="Morning" checked> Morning</label>
                                <label class="pg-chip"><input type="checkbox" name="times" value="Midday"> Midday</label>
                                <label class="pg-chip"><input type="checkbox" name="times" value="Evening" checked> Evening</label>
                            </div>
                            <div class="pg-field">
                                <label class="pg-label" for="duration">Minutes per session</label>
                                <input id="duration" type="number" min="1" max="120" value="10" class="pg-input" required>
                            </div>
                        </div>

                        <div class="pg-row">
                            <div class="pg-field">
                                <label class="pg-label">Focus Areas</label>
                                <div class="pg-grid-2">
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Praise/Thanksgiving" checked> Praise/Thanksgiving</label>
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Confession"> Confession</label>
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Intercession for others" checked> Intercession for others</label>
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Petition/Needs"> Petition/Needs</label>
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Listening/Silence" checked> Listening/Silence</label>
                                    <label class="pg-check"><input type="checkbox" name="focus" value="Scripture reflection"> Scripture reflection</label>
                                </div>
                            </div>
                            <div class="pg-field">
                                <label class="pg-label" for="scripture">Optional Scripture verse</label>
                                <input id="scripture" type="text" placeholder="e.g., Psalm 23:1–3" class="pg-input">
                            </div>
                        </div>

                        <div class="pg-row">
                            <div class="pg-field">
                                <label class="pg-label" for="notes">Personal notes (optional)</label>
                                <textarea id="notes" class="pg-textarea" rows="3" placeholder="Intentions, people to pray for, reminders..."></textarea>
                            </div>
                        </div>

                        <div class="pg-actions end">
                            <button type="button" class="pg-btn" id="btnGenerateRule">Generate Guide</button>
                            <button type="button" class="pg-btn subtle" id="btnClearRule">Clear</button>
                        </div>
                    </form>

                    <div id="ruleOutput" class="pg-output" hidden>
                        <div class="pg-output-header">
                            <h4>Your Beginner Prayer Guide</h4>
                            <div class="pg-output-actions">
                                <button class="pg-btn tiny" id="btnCopyRule" title="Copy to clipboard">Copy</button>
                                <button class="pg-btn tiny" id="btnDownloadRule" title="Download as .txt">Download</button>
                            </div>
                        </div>
                        <pre class="pg-pre" id="ruleText"></pre>
                    </div>
                </div>

                <!-- Pray Now (Timer) -->
                <div class="pg-panel" id="prayPanel" hidden>
                    <h3 class="pg-panel-title">Pray Now</h3>
                    <div class="pg-row align-center">
                        <label class="pg-label" for="prayMinutes">Minutes:</label>
                        <input id="prayMinutes" type="number" min="1" max="180" value="10" class="pg-input small" />
                        <button class="pg-btn" id="btnStartTimer">Start</button>
                        <button class="pg-btn subtle" id="btnPauseTimer" disabled>Pause</button>
                        <button class="pg-btn subtle" id="btnResetTimer" disabled>Reset</button>
                    </div>

                    <div class="pg-timer">
                        <div class="pg-timer-display" aria-live="polite" id="timerDisplay">10:00</div>
                        <div class="pg-timer-hints" id="timerHints">
                            Suggested flow: 2m Praise • 2m Confession • 4m Intercession • 2m Listening
                        </div>
                        <div class="pg-progress" aria-hidden="true">
                            <div class="pg-progress-bar" id="timerBar" style="width:0%"></div>
                        </div>
                    </div>
                </div>

                <!-- General Info -->
                <div class="pg-panel" id="prayerInfo">
                    <h3 class="pg-panel-title">What is Prayer? Why pray?</h3>
                    <div class="pg-info">
                        <p><strong>Prayer</strong> is a conversation with God—speaking, listening, and aligning your heart with His will.</p>
                        <ul class="pg-list">
                            <li><strong>Relationship:</strong> Deepens trust and intimacy with God.</li>
                            <li><strong>Clarity:</strong> Calms the mind and helps discern next steps.</li>
                            <li><strong>Resilience:</strong> Reduces anxiety and builds hope during trials.</li>
                            <li><strong>Community:</strong> Interceding for others strengthens unity and compassion.</li>
                            <li><strong>Formation:</strong> Regular rhythms shape character and gratitude.</li>
                        </ul>
                        <details class="pg-details">
                            <summary>Tips for beginners</summary>
                            <ol class="pg-ol">
                                <li>Start small: 5–10 minutes at consistent times.</li>
                                <li>Pick a quiet place; put your device on Do Not Disturb.</li>
                                <li>Use a simple structure (Praise → Confession → Intercession → Petition → Listening).</li>
                                <li>Keep a short list of people/needs and update weekly.</li>
                                <li>End with gratitude and one practical step for today.</li>
                            </ol>
                        </details>
                    </div>
                </div>

                <!-- Prayer Request Modal -->
                <dialog id="prayerDialog" class="pg-dialog">
                    <form method="dialog" class="pg-dialog-card" id="prayerForm">
                        <header class="pg-dialog-header">
                            <h3>Prayer Request</h3>
                            <button class="pg-icon-btn" value="cancel" aria-label="Close">&times;</button>
                        </header>

                        <div class="pg-field">
                            <label class="pg-label">Type</label>
                            <div class="pg-grid-2">
                                <label class="pg-radio"><input type="radio" name="reqType" value="For myself" checked> For myself</label>
                                <label class="pg-radio"><input type="radio" name="reqType" value="Request prayer"> Request prayer</label>
                            </div>
                        </div>

                        <div class="pg-row">
                            <div class="pg-field">
                                <label class="pg-label" for="reqName">Name (optional)</label>
                                <input id="reqName" type="text" class="pg-input" placeholder="Your name">
                            </div>
                            <div class="pg-field">
                                <label class="pg-label" for="reqEmail">Email (optional)</label>
                                <input id="reqEmail" type="email" class="pg-input" placeholder="name@example.com">
                            </div>
                        </div>

                        <div class="pg-field">
                            <label class="pg-label" for="reqMessage">Prayer request</label>
                            <textarea id="reqMessage" class="pg-textarea" rows="4" required placeholder="Share your need or the person to pray for..."></textarea>
                        </div>

                        <div class="pg-row">
                            <div class="pg-field">
                                <label class="pg-label">Privacy</label>
                                <label class="pg-radio"><input type="radio" name="privacy" value="Private" checked> Private (only you)</label>
                                <label class="pg-radio"><input type="radio" name="privacy" value="Anonymous"> Anonymous (ok to share without name)</label>
                                <label class="pg-radio"><input type="radio" name="privacy" value="Share with first name"> Share with first name</label>
                            </div>
                        </div>

                        <footer class="pg-dialog-footer">
                            <button class="pg-btn" value="submit" id="btnSubmitRequest">Submit</button>
                            <button class="pg-btn subtle" value="cancel">Cancel</button>
                        </footer>
                    </form>
                </dialog>
            </section>

            <div class="grid-2">
                <div class="card">
                    <h2 class="section-title">Daily Devotional</h2>
                    <div id="devotionalToday" class="devotional"></div>
                    <div class="row gap mt">
                        <input id="devotionalCustom" class="input" placeholder="Add your own devotional text" />
                        <button id="addDevotionalBtn" class="btn primary">Add</button>
                    </div>
                </div>

                <div class="card">
                    <h2 class="section-title">Goals</h2>
                    <div class="row gap">
                        <input id="goalInput" class="input" placeholder="e.g., Read one chapter of John" />
                        <button id="addGoalBtn" class="btn primary">Add</button>
                    </div>
                    <div id="goalsList" class="list mt"></div>
                </div>

                <div class="card">
                    <h2 class="section-title">Journal</h2>
                    <textarea id="journalEntry" rows="4" class="input" placeholder="Write your thoughts, prayers, and reflections…"></textarea>
                    <div class="actions">
                        <button id="saveJournalBtn" class="btn primary">Save Entry</button>
                        <button id="clearJournalBtn" class="btn">Clear</button>
                    </div>
                    <div id="journalList" class="list mt"></div>
                </div>

                <div class="card">
                    <h2 class="section-title">Ministry (Pay It Forward in Action)</h2>
                    <div class="row gap">
                        <input id="ministryIdea" class="input" placeholder="e.g., Visit a neighbor, volunteer, write an encouragement note" />
                        <button id="addMinistryBtn" class="btn primary">Add</button>
                    </div>
                    <div id="ministryList" class="list mt"></div>
                </div>
            </div>
        </section>

        <!-- Bible Study -->
        <section id="study" class="tab-section hidden">
            <h1 class="page-title">Bible Study</h1>
            <p class="page-sub">Keep dated notes, create a Google Meet, and set simple schedules.</p>

            <div class="grid-2">
                <div class="card">
                    <h2 class="section-title">Dated Notes</h2>
                    <div class="row gap">
                        <input id="noteDate" type="datetime-local" class="input" />
                        <div class="row gap">
                            <button id="saveNoteBtn" class="btn primary">Save Note</button>
                            <button id="clearNoteTextBtn" class="btn">Clear</button>
                        </div>
                    </div>
                    <textarea id="noteText" rows="3" class="input" placeholder="Sermon notes, chapter insights, questions…"></textarea>
                    <div id="notesList" class="list mt"></div>
                </div>

                <div class="card">
                    <h2 class="section-title">Meet & Schedule</h2>
                    <div class="row gap">
                        <input id="meetTitle" class="input" value="Bible Study" />
                        <input id="meetStart" type="datetime-local" class="input" />
                        <input id="meetMins" type="number" class="input" min="15" step="15" value="60" />
                    </div>
                    <div class="row gap mt">
                        <button id="createMeetBtn" class="btn primary">Create Google Meet</button>
                        <button id="addCalendarBtn" class="btn">Add to Google Calendar</button>
                        <button id="copyInviteBtn" class="btn">Copy Invite Link</button>
                    </div>
                    <p class="muted mt">Tip: Paste the Meet or Calendar link into a Community chat.</p>
                </div>
            </div>
        </section>

        <!-- Recovery -->
        <section id="recovery" class="tab-section hidden">
            <h1 class="page-title">Recovery Power in Christ</h1>
            <p class="page-sub">Theme: Freedom through faith, strength through surrender, and renewal through reform.</p>

            <div class="card">
                <div class="row gap">
                    <a class="btn" href="/assets/Recovery_Power_in_Christ_10_Step_Plan.pdf" download>Download PDF</a>
                    <button id="recoveryPrintBtn" class="btn primary">Print Section</button>
                </div>
            </div>

            <div class="card">
                <h2 class="section-title">Overview</h2>
                <p>
                    A 10-Step Christian recovery path centered on Christ, practical reform, and community accountability
                    (less emphasis on anonymity, more on transformation).
                </p>
            </div>

            <div class="card">
                <h2 class="section-title">Guiding Principles</h2>
                <ul class="list">
                    <li><strong>Transparency over secrecy:</strong> Transformation thrives in truth, not anonymity.</li>
                    <li><strong>Faith over fear:</strong> God’s grace redeems every failure.</li>
                    <li><strong>Community over isolation:</strong> Healing multiplies through fellowship.</li>
                    <li><strong>Reform over relapse:</strong> Every day is a step toward renewal.</li>
                </ul>
            </div>

            <div id="recoverySteps" class="list mt">
                <details class="re-step card" data-step="1" open>
                    <summary class="re-sum">
                        <span class="re-num">1</span>
                        <div>
                            <h3 class="re-title">Step 1 — Acknowledge the Bondage</h3>
                            <p class="re-verse">“For all have sinned and fall short of the glory of God.” – Romans 3:23</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Recognize that addiction has taken control of your life and separated you from peace, purpose, and self-control. Admit openly that you need help and cannot overcome this alone.</p>
                        <p class="re-goal"><strong>Goal:</strong> Honest self-reflection and confession without shame.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="2">
                    <summary class="re-sum">
                        <span class="re-num">2</span>
                        <div>
                            <h3 class="re-title">Step 2 — Believe in Christ’s Power to Restore</h3>
                            <p class="re-verse">“I can do all things through Christ who strengthens me.” – Philippians 4:13</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Accept that only through God’s grace and power can true recovery and transformation occur. Believe that His strength is greater than your weakness.</p>
                        <p class="re-goal"><strong>Goal:</strong> Replace despair with hope grounded in divine power.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="3">
                    <summary class="re-sum">
                        <span class="re-num">3</span>
                        <div>
                            <h3 class="re-title">Step 3 — Surrender to the Lord’s Guidance</h3>
                            <p class="re-verse">“Trust in the Lord with all your heart and lean not on your own understanding.” – Proverbs 3:5–6</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Submit your will to God’s plan. Let Him lead your thoughts, emotions, and actions daily through prayer and Scripture.</p>
                        <p class="re-goal"><strong>Goal:</strong> Transfer control from self-reliance to God-reliance.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="4">
                    <summary class="re-sum">
                        <span class="re-num">4</span>
                        <div>
                            <h3 class="re-title">Step 4 — Examine and Confess Past Wrongs</h3>
                            <p class="re-verse">“If we confess our sins, He is faithful and just to forgive us our sins.” – 1 John 1:9</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Take an honest inventory of your life — wrongdoings, patterns, and broken relationships. Confess them to God and, when appropriate, to a trusted mentor or pastor.</p>
                        <p class="re-goal"><strong>Goal:</strong> Healing through humility and transparency.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="5">
                    <summary class="re-sum">
                        <span class="re-num">5</span>
                        <div>
                            <h3 class="re-title">Step 5 — Reform Your Mind and Habits</h3>
                            <p class="re-verse">“Be transformed by the renewing of your mind.” – Romans 12:2</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Replace destructive routines with Christ-centered habits. Read Scripture daily, attend church or small group, and practice gratitude, exercise, and purposeful service.</p>
                        <p class="re-goal"><strong>Goal:</strong> Build new patterns that crowd out old temptations.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="6">
                    <summary class="re-sum">
                        <span class="re-num">6</span>
                        <div>
                            <h3 class="re-title">Step 6 — Make Amends and Restore Relationships</h3>
                            <p class="re-verse">“If it is possible, as far as it depends on you, live at peace with everyone.” – Romans 12:18</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Where possible, seek forgiveness and make things right with those you’ve harmed. This step rebuilds integrity and trust.</p>
                        <p class="re-goal"><strong>Goal:</strong> Reconciliation and relational healing.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="7">
                    <summary class="re-sum">
                        <span class="re-num">7</span>
                        <div>
                            <h3 class="re-title">Step 7 — Build a Christ-Centered Community</h3>
                            <p class="re-verse">“As iron sharpens iron, so one person sharpens another.” – Proverbs 27:17</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Surround yourself with believers committed to walking with you. Recovery flourishes in fellowship, not isolation.</p>
                        <p class="re-goal"><strong>Goal:</strong> Accountability through Christian brotherhood/sisterhood.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="8">
                    <summary class="re-sum">
                        <span class="re-num">8</span>
                        <div>
                            <h3 class="re-title">Step 8 — Serve Others with Compassion</h3>
                            <p class="re-verse">“Whoever refreshes others will be refreshed.” – Proverbs 11:25</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Help others struggling with addiction or hardship. Serving shifts focus outward and reinforces your new identity in Christ.</p>
                        <p class="re-goal"><strong>Goal:</strong> Transformation through ministry and compassion.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="9">
                    <summary class="re-sum">
                        <span class="re-num">9</span>
                        <div>
                            <h3 class="re-title">Step 9 — Guard Your Heart and Mind Daily</h3>
                            <p class="re-verse">“Above all else, guard your heart, for everything you do flows from it.” – Proverbs 4:23</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Develop daily disciplines — prayer, journaling, Scripture memorization, and gratitude — to fortify against relapse and temptation.</p>
                        <p class="re-goal"><strong>Goal:</strong> Spiritual maintenance through intentional living.</p>
                    </div>
                </details>

                <details class="re-step card" data-step="10">
                    <summary class="re-sum">
                        <span class="re-num">10</span>
                        <div>
                            <h3 class="re-title">Step 10 — Share Your Testimony</h3>
                            <p class="re-verse">“They overcame him by the blood of the Lamb and by the word of their testimony.” – Revelation 12:11</p>
                        </div>
                    </summary>
                    <div class="re-body">
                        <p>Your story is powerful. Tell others what Christ has done in your life. Sharing reinforces your own growth and inspires others to seek freedom.</p>
                        <p class="re-goal"><strong>Goal:</strong> Turn personal victory into a beacon for others.</p>
                    </div>
                </details>
            </div>

            <div class="card">
                <h2 class="section-title">Recovery Sign Ups</h2>
                <div class="row gap">
                    <button id="recoveryAdminBtn" class="btn">Admin</button>
                    <span id="recoveryAdminBadge" class="admin-badge hidden">ADMIN</span>
                    <button id="recoverySignUpBtn" class="btn primary">Sign Up</button>
                    <button id="recoveryDownloadCsvBtn" class="btn">Download CSV</button>
                </div>

                <div id="recoveryAdminBar" class="row gap mt hidden">
                    <label class="switch">
                        <input id="recoveryHidePublic" type="checkbox">
                        <span>Hide signups from public</span>
                    </label>
                    <button id="recoveryClearAllBtn" class="btn">Clear All</button>
                </div>

                <p class="muted">Join the “Recovery Power in Christ” journey. We’ll follow up using your preferred contact method.</p>
                <div id="recoverySignupList" class="list mt"></div>
            </div>
        </section>

        <!-- Pay it Forward -->
        <section id="payit" class="tab-section hidden">
            <h1 class="page-title">Pay It Forward</h1>
            <p class="page-sub">Fundraising and donations to support local ministry and platform costs.</p>

            <div class="card">
                <h2 class="section-title">Donate / Pay It Forward</h2>
                <div class="row gap">
                    <input id="donAmount" type="number" class="input" min="1" value="25" />
                    <input id="donPurpose" class="input" value="General Support" />
                    <button id="donDonateBtn" class="btn primary">Donate</button>
                    <button id="donMoreBtn" class="btn">More Options</button>
                    <!-- === Support button added here (to the right) === -->
                    <button id="btnSupport" class="btn">Support</button>
                </div>

                <div class="progress mt">
                    <div class="row spread">
                        <div class="label">Fundraising Progress</div>
                        <div id="progressLabel" class="muted">$0 / $2000</div>
                    </div>
                    <div class="bar">
                        <div id="progressBar" class="bar-fill" style="width: 0%;"></div>
                    </div>
                    <div class="grid-3 mt">
                        <div class="row gap">
                            <button id="dec25" class="btn">-25</button>
                            <button id="inc25" class="btn">+25</button>
                            <button id="resetRaised" class="btn">Reset Raised</button>
                        </div>
                        <div class="row gap">
                            <span class="muted">Goal:</span>
                            <input id="goalInput2" type="number" class="input small" value="2000" min="100" />
                        </div>
                        <div class="muted">Use these controls while you integrate a real payment backend.</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ===== Support Modal (drop-in) ===== -->
    <dialog id="supportDialog" class="pg-dialog">
        <form method="dialog" class="pg-dialog-card" id="supportForm">
            <header class="pg-dialog-header">
                <h3>Support Jonathan</h3>
                <button class="pg-icon-btn" value="cancel" aria-label="Close">×</button>
            </header>

            <!-- Amount / Note (optional) -->
            <div class="pg-row">
                <div class="pg-field">
                    <label class="pg-label" for="supAmount">Amount (USD, optional)</label>
                    <input id="supAmount" type="number" min="1" step="1" class="pg-input" placeholder="e.g., 25" />
                </div>
                <div class="pg-field">
                    <label class="pg-label" for="supNote">Note (optional)</label>
                    <input id="supNote" type="text" class="pg-input" placeholder="Thanks for your work!" />
                </div>
            </div>

            <div class="pg-panel" style="margin-top:10px">
                <h4 class="pg-panel-title">Choose a method</h4>

                <!-- PayPal -->
                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto;">
                        <div>
                            <strong>PayPal</strong><br>
                            <small>paypal.com/paypalme/<code>jdmarlow86</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="ppWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="ppCopy">Copy handle</button>
                    </div>
                </div>

                <!-- Cash App -->
                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto;">
                        <div>
                            <strong>Cash App</strong><br>
                            <small>cash.app/<code>$jdmarlow</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="caWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="caCopy">Copy $tag</button>
                    </div>
                </div>

                <!-- Venmo -->
                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto auto;">
                        <div>
                            <strong>Venmo</strong><br>
                            <small>venmo.com/u/<code>Jonathan-Marlow-19</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="vmApp">Open in app</button>
                        <button class="pg-btn" type="button" id="vmWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="vmCopy">Copy @user</button>
                    </div>
                </div>
            </div>

            <footer class="pg-dialog-footer">
                <button class="pg-btn subtle" value="cancel">Close</button>
            </footer>
        </form>
    </dialog>

    <!-- Recovery: Signup Modal -->
    <div id="recoveryModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="recoveryModalTitle">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content" role="document">
            <div class="modal-header">
                <h3 id="recoveryModalTitle" class="section-title">Recovery Sign Up</h3>
                <button class="icon-btn" id="recoveryModalClose" aria-label="Close">✕</button>
            </div>

            <form id="recoveryForm" class="modal-body">
                <div class="row gap">
                    <label class="input-block">
                        <span>Full Name *</span>
                        <input name="fullName" class="input" required placeholder="e.g., Jordan Smith">
                    </label>
                </div>

                <div class="grid-2">
                    <label class="input-block">
                        <span>Email</span>
                        <input name="email" type="email" class="input" placeholder="jordan@example.com">
                    </label>

                    <label class="input-block">
                        <span>Phone</span>
                        <input name="phone" class="input" placeholder="(555) 123-4567">
                    </label>
                </div>

                <fieldset class="fieldset">
                    <legend>Preferred Contact Method *</legend>
                    <div class="row gap wrap">
                        <label class="chip"><input type="radio" name="preferred" value="Email" required> Email</label>
                        <label class="chip"><input type="radio" name="preferred" value="Phone Call" required> Phone Call</label>
                        <label class="chip"><input type="radio" name="preferred" value="Text (SMS)" required> Text (SMS)</label>
                        <label class="chip"><input type="radio" name="preferred" value="Other" required> Other</label>
                    </div>
                </fieldset>

                <label class="input-block">
                    <span>Notes (optional)</span>
                    <textarea name="notes" rows="3" class="input" placeholder="Anything we should know to support you better?"></textarea>
                </label>

                <label class="row gap">
                    <input type="checkbox" name="consent" required>
                    <span>I consent to be contacted about Recovery Power in Christ.</span>
                </label>

                <div class="modal-actions">
                    <button type="button" class="btn" id="recoveryCancel">Cancel</button>
                    <button type="submit" class="btn primary">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="site-footer">
        <div class="container footer-inner">
            <div>© <span id="year"></span> mybiblebelt.org</div>
            <div class="footer-links">
                <a data-jump="resources" href="#">Resources</a>
                <a data-jump="community" href="#">Community</a>
                <a data-jump="growth" href="#">Personal Growth</a>
                <a data-jump="study" href="#">Bible Study</a>
                <a data-jump="payit" href="#">Donate</a>
            </div>
        </div>
    </footer>

    <!-- Support modal behavior -->
    <script>
        (function () {
            // Your tags
            const TAGS = {
                paypal: 'jdmarlow86',
                cashapp: '$jdmarlow',
                venmo: 'Jonathan-Marlow-19'
            };

            // Elements
            const btnSupport = document.getElementById('btnSupport');
            const dialog = document.getElementById('supportDialog');
            const supAmount = document.getElementById('supAmount');
            const supNote = document.getElementById('supNote');
            const donAmount = document.getElementById('donAmount'); // prefill source

            const ppWeb = document.getElementById('ppWeb');
            const ppCopy = document.getElementById('ppCopy');

            const caWeb = document.getElementById('caWeb');
            const caCopy = document.getElementById('caCopy');

            const vmApp = document.getElementById('vmApp');
            const vmWeb = document.getElementById('vmWeb');
            const vmCopy = document.getElementById('vmCopy');

            // Open modal (prefill amount from Pay It Forward)
            btnSupport.addEventListener('click', () => {
                if (donAmount && donAmount.value) supAmount.value = donAmount.value;
                if (typeof dialog.showModal === 'function') dialog.showModal();
                else alert('Your browser does not support modals.');
            });

            // Helpers
            const getAmount = () => {
                const v = parseInt(supAmount.value, 10);
                return Number.isFinite(v) && v > 0 ? v : null;
            };
            const getNote = () => (supNote.value || '').trim();
            function openNew(url) { window.open(url, '_blank', 'noopener,noreferrer'); }
            async function copy(text, el) {
                try {
                    await navigator.clipboard.writeText(text);
                    const old = el.textContent;
                    el.textContent = 'Copied!';
                    setTimeout(() => el.textContent = old, 1200);
                } catch {
                    alert('Copy failed—please copy manually: ' + text);
                }
            }

            // PayPal web
            // Format: https://www.paypal.com/paypalme/<handle>/<amount>
            ppWeb.addEventListener('click', () => {
                const amt = getAmount();
                const base = `https://www.paypal.com/paypalme/${encodeURIComponent(TAGS.paypal)}`;
                const url = amt ? `${base}/${amt}` : base;
                openNew(url);
            });
            ppCopy.addEventListener('click', (e) => copy(TAGS.paypal, e.currentTarget));

            // Cash App web
            caWeb.addEventListener('click', () => {
                const amt = getAmount();
                const clean = TAGS.cashapp.startsWith('$') ? TAGS.cashapp.slice(1) : TAGS.cashapp;
                const base = `https://cash.app/$${encodeURIComponent(clean)}`;
                const url = amt ? `${base}/${amt}` : base;
                openNew(url);
            });
            caCopy.addEventListener('click', (e) => copy(TAGS.cashapp, e.currentTarget));

            // Venmo deep link + web
            vmApp.addEventListener('click', () => {
                const amt = getAmount();
                const note = getNote();
                const qp = new URLSearchParams();
                qp.set('recipients', TAGS.venmo);
                if (amt) qp.set('amount', amt);
                if (note) qp.set('note', note);
                const deeplink = `venmo://paycharge?${qp.toString()}`;
                window.location.href = deeplink; // best effort
            });
            vmWeb.addEventListener('click', () => {
                const url = `https://venmo.com/u/${encodeURIComponent(TAGS.venmo)}`;
                openNew(url);
            });
            vmCopy.addEventListener('click', (e) => copy(TAGS.venmo, e.currentTarget));
        })();
    </script>

    <script src="./app.js"></script>
</body>
</html>
