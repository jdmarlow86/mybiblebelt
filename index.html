<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>mybiblebelt.org</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Set theme BEFORE CSS to prevent flash -->
    <script>
        (function () {
            try {
                const stored = localStorage.getItem("theme");
                const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
                const useDark = stored ? stored === "dark" : prefersDark;
                if (useDark) document.documentElement.classList.add("dark");
            } catch { }
        })();
    </script>

    <link rel="stylesheet" href="./styles.css" />
    <style>
        /* === Support button styling === */
        .nav-btn.support-btn {
            background-color: #16a34a; /* Tailwind green-600 */
            color: #fff;
            font-weight: 600;
            border-radius: 6px;
            padding: 6px 14px;
            transition: background 0.2s ease, transform 0.1s ease;
        }

            .nav-btn.support-btn:hover {
                background-color: #22c55e; /* Tailwind green-500 */
                transform: translateY(-1px);
            }

            .nav-btn.support-btn:active {
                background-color: #15803d; /* Tailwind green-700 */
                transform: translateY(0);
            }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="brand">
            <div class="logo">
                <img src="assets/mybiblebelt-icon.png" alt="mybiblebelt.org Logo" style="width:36px; height:36px; border-radius:10px;">
            </div>
            <div class="brand-text">
                <div class="brand-title">mybiblebelt.org</div>
                <div class="brand-sub">Bible-focused study â€¢ Find community â€¢ Grow daily</div>
            </div>
        </div>

        <nav class="nav">
            <button data-tab="welcome" class="nav-btn active">Welcome</button>
            <button data-tab="resources" class="nav-btn">Resources</button>
            <button data-tab="community" class="nav-btn">Community</button>
            <button data-tab="growth" class="nav-btn">Personal Growth</button>
            <button data-tab="study" class="nav-btn">Bible Study</button>
            <button data-tab="recovery" class="nav-btn">Recovery</button>
            <button data-tab="payit" class="nav-btn">Pay it Forward</button>
            <!-- ðŸŸ¢ Green Support button -->
            <button id="btnSupport" class="nav-btn support-btn">ðŸ’š Support</button>
            <button id="themeToggle" class="nav-btn" aria-label="Toggle dark mode">ðŸŒ™</button>
        </nav>

        <div class="nav-select-wrap">
            <div class="row gap">
                <select id="mobileNav">
                    <option value="welcome">Welcome</option>
                    <option value="resources">Resources</option>
                    <option value="community">Community</option>
                    <option value="growth">Personal Growth</option>
                    <option value="study">Bible Study</option>
                    <option value="recovery">Recovery</option>
                    <option value="payit">Pay it Forward</option>
                </select>
                <button id="themeToggleMobile" class="btn" aria-label="Toggle dark mode">ðŸŒ™</button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Everything else remains unchanged -->
        <section id="welcome" class="tab-section">
            <h1 class="page-title">Welcome to mybiblebelt.org</h1>
            <p class="page-sub">Bible-focused study with a warm invitation to worship in a local church of your preference.</p>
            <div class="card">
                <p>
                    Our heart is to help you explore Scripture, find community, and grow daily. Whether you are just
                    beginning or continuing a lifelong journey, you are welcome here. We encourage you to visit a local
                    churchâ€”of your preferenceâ€”to worship, learn, and serve alongside others.
                </p>
                <div class="actions">
                    <button id="findChurchBtn" class="btn primary">Find a Local Church</button>
                </div>
            </div>
        </section>

        <!-- (all your other sections like Resources, Community, Growth, Study, Recovery, Payit remain intact) -->
    </main>

    <!-- ===== Support Modal (Drop-in, unchanged) ===== -->
    <dialog id="supportDialog" class="pg-dialog">
        <form method="dialog" class="pg-dialog-card" id="supportForm">
            <header class="pg-dialog-header">
                <h3>Support Jonathan</h3>
                <button class="pg-icon-btn" value="cancel" aria-label="Close">Ã—</button>
            </header>

            <div class="pg-row">
                <div class="pg-field">
                    <label class="pg-label" for="supAmount">Amount (USD, optional)</label>
                    <input id="supAmount" type="number" min="1" step="1" class="pg-input" placeholder="e.g., 25" />
                </div>
                <div class="pg-field">
                    <label class="pg-label" for="supNote">Note (optional)</label>
                    <input id="supNote" type="text" class="pg-input" placeholder="Thanks for your work!" />
                </div>
            </div>

            <div class="pg-panel" style="margin-top:10px">
                <h4 class="pg-panel-title">Choose a method</h4>

                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto;">
                        <div>
                            <strong>PayPal</strong><br>
                            <small>paypal.com/paypalme/<code>jdmarlow86</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="ppWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="ppCopy">Copy handle</button>
                    </div>
                </div>

                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto;">
                        <div>
                            <strong>Cash App</strong><br>
                            <small>cash.app/<code>$jdmarlow</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="caWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="caCopy">Copy $tag</button>
                    </div>
                </div>

                <div class="pg-panel" style="margin-top:8px">
                    <div class="pg-row" style="grid-template-columns: 1fr auto auto auto;">
                        <div>
                            <strong>Venmo</strong><br>
                            <small>venmo.com/u/<code>Jonathan-Marlow-19</code></small>
                        </div>
                        <button class="pg-btn" type="button" id="vmApp">Open in app</button>
                        <button class="pg-btn" type="button" id="vmWeb">Open on web</button>
                        <button class="pg-btn subtle" type="button" id="vmCopy">Copy @user</button>
                    </div>
                </div>
            </div>

            <footer class="pg-dialog-footer">
                <button class="pg-btn subtle" value="cancel">Close</button>
            </footer>
        </form>
    </dialog>

    <!-- Support logic -->
    <script>
        (function () {
            const TAGS = {
                paypal: 'jdmarlow86',
                cashapp: '$jdmarlow',
                venmo: 'Jonathan-Marlow-19'
            };
            const btnSupport = document.getElementById('btnSupport');
            const dialog = document.getElementById('supportDialog');
            const supAmount = document.getElementById('supAmount');
            const supNote = document.getElementById('supNote');
            const ppWeb = document.getElementById('ppWeb');
            const ppCopy = document.getElementById('ppCopy');
            const caWeb = document.getElementById('caWeb');
            const caCopy = document.getElementById('caCopy');
            const vmApp = document.getElementById('vmApp');
            const vmWeb = document.getElementById('vmWeb');
            const vmCopy = document.getElementById('vmCopy');

            btnSupport.addEventListener('click', () => {
                if (typeof dialog.showModal === 'function') dialog.showModal();
                else alert('Your browser does not support modals.');
            });

            const getAmount = () => {
                const v = parseInt(supAmount.value, 10);
                return Number.isFinite(v) && v > 0 ? v : null;
            };
            const getNote = () => (supNote.value || '').trim();
            function openNew(url) { window.open(url, '_blank', 'noopener,noreferrer'); }
            async function copy(text, el) {
                try {
                    await navigator.clipboard.writeText(text);
                    const old = el.textContent;
                    el.textContent = 'Copied!';
                    setTimeout(() => el.textContent = old, 1200);
                } catch {
                    alert('Copy failedâ€”please copy manually: ' + text);
                }
            }

            ppWeb.addEventListener('click', () => {
                const amt = getAmount();
                const base = `https://www.paypal.com/paypalme/${encodeURIComponent(TAGS.paypal)}`;
                openNew(amt ? `${base}/${amt}` : base);
            });
            ppCopy.addEventListener('click', e => copy(TAGS.paypal, e.currentTarget));

            caWeb.addEventListener('click', () => {
                const amt = getAmount();
                const clean = TAGS.cashapp.startsWith('$') ? TAGS.cashapp.slice(1) : TAGS.cashapp;
                const base = `https://cash.app/$${encodeURIComponent(clean)}`;
                openNew(amt ? `${base}/${amt}` : base);
            });
            caCopy.addEventListener('click', e => copy(TAGS.cashapp, e.currentTarget));

            vmApp.addEventListener('click', () => {
                const amt = getAmount();
                const note = getNote();
                const qp = new URLSearchParams();
                qp.set('recipients', TAGS.venmo);
                if (amt) qp.set('amount', amt);
                if (note) qp.set('note', note);
                window.location.href = `venmo://paycharge?${qp.toString()}`;
            });
            vmWeb.addEventListener('click', () => {
                openNew(`https://venmo.com/u/${encodeURIComponent(TAGS.venmo)}`);
            });
            vmCopy.addEventListener('click', e => copy(TAGS.venmo, e.currentTarget));
        })();
    </script>

    <script src="./app.js"></script>
</body>
</html>
